I can strengthen the analysis by looking at the Intensity data. This data is based on activity levels determined by the user's heart-rate, so Intensity data should function as a proxy for heart-rate data, with the added benefit of giving me access to pre-summarized data tables.
This approach does not appear to be valid because the logs exist for every minute, even if the user takes it off: by visualising the minute-by-minute intensity logs, we can see that the logs exist for almost the entire time range for nearly every user, including multiple users who apparently go weeks without ever rising above a "Sedentary" state. The most likely explanation for this would be that the data logging generates a log of "Sedentary" if it detects no activity from the user. The issue here of course is that this leaves me no way to distinguish between a user who is asleep, and therefore logging "Sedentary" minutes, or a user who has taken off their FitBit, and is therefore logging "Sedentary" minutes.

```{r intensity plotting}

ggplot(intensity_src_mins_tall) +
  geom_point(aes(x = activity_minute, y = intensity)) +
  facet_wrap(vars(id))

```

```{r intensity_based_sleep_analysis}
sleep_stt_hour <- 22
sleep_end_hour <- 4
total_nights <- 30
total_sleep_hours <- total_nights * (24 - sleep_stt_hour + sleep_end_hour)

sleep_hours <- intensity_sum_hours_wide %>%
  mutate(raw_hour = hour(activity_hour)) %>%
  filter(average_intensity > 0) %>%
  group_by(id) %>%
  summarize(night_hours_logged = sum(raw_hour > sleep_stt_hour | raw_hour < sleep_end_hour),
            pct_night_hours_logged = night_hours_logged / total_sleep_hours)
# View(sleep_hours)

plot_histo_pareto(sleep_hours$pct_night_hours_logged, bin_width = 0.1) +
  labs(title = "Percentage of Sleep logged ")

# no_log_ids_intensity <- sleep_hours %>%
#   filter(pct_night_hours_logged >= 0.8) %>%
#   select(id)
# no_log_ids_intensity <- unique(no_log_ids_intensity$id)
# print(no_log_ids_intensity)
```

```{r}
ids_154_hours <- sleep_hours %>%
  filter(night_hours_logged == 154) %>%
  select(id)
ids_154_hours <- unique(ids_154_hours$id)

ids_216_hours <- sleep_hours %>%
  filter(night_hours_logged == 216) %>%
  select(id)
ids_216_hours <- unique(ids_216_hours$id)

ids_276_hours <- sleep_hours %>%
  filter(night_hours_logged == 276) %>%
  select(id)
ids_276_hours <- unique(ids_276_hours$id)
```

```{r}
later_sets <- unique(c(ids_216_hours, ids_276_hours))
matches <- later_sets %in% ids_154_hours
```

Findings:

* 55% of users (18) logged sleep on 
* When I increased the time range to between 10pm and 6am, I got strikingly similar results, this time with 55% of users (18) recording exactly 216 hours each: an increase of 62 hours per user after the range was increased by 2 hours over thirty nights
* Increasing the range to between 8pm and 6am yielded 55% of users (18) recording exactly 276 hours each, an increase of sixty hours after the range was increased by another 2 hours over thirty nights
* Analysis of the IDs revealed that these were the same 18 users in all three cases
* Given the consistent changes that can be produced by manipulating the analysis parameters, and the fact that these results contradict the explicit sleep-logging data, I suspect that this method is flawed.
* I suspect that the 

* This is the opposite of the previous finding, which found that 54% of users did not log any sleep records